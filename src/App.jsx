import { useState } from 'react';
import PropTypes from 'prop-types';
import Snowfall from './components/Snowfall';

const wordsData = [
  'Δίχτυ',
  'Εικόνα',
  'Κότα',
  'Τράπεζα',
  'Ουρά',
  'Ακτίνα',
  'Νοσοκομείο',
  'Κρόνος',
  'Γρασίδι',
  'Φύλλο',
  'Φούρνος',
  'Παρίσι',
  'Καπέλο',
  'Φώκια',
  'Ιός',
  'Κύβος',
  'Λειτουργία',
  'Εξωγήινος',
  'Ουρανοξύστης',
  'Πάστα',
  'Σπίρτο',
  'Ινδία',
  'Συμφωνία',
  'Μόσχα',
  'Διαμάντι',
  'Μεταφορά',
  'Διαστάυρωση',
  'Σύνδεσμος',
  'Σειρήνα',
  'Ελιά',
  'Γυαλί',
  'Σκέπασμα',
  'Πιλότος',
  'Αντίχειρας',
  'Ευθεία',
  'Ράδιο',
  'Βραζιλία',
  'Δάσκαλος',
  'Κάβουρας',
  'Χταπόδι',
  'Καμπάνα',
  'Ασθενοφόρο',
  'Τόξο',
  'Λέιζερ',
  'Σύνταγμα',
  'Πεκίνο',
  'Διαβατήριο',
  'Κωδικός',
  'Γραμμή',
  'Τετράγωνο',
  'Καρφίτσα',
  'Κόμμα',
  'Δύναμη',
  'Δάσος',
  'Κάρτα',
  'Πόδι',
  'Ελικόπτερο',
  'Νάνος',
  'Κύκλος',
  'Διακόπτης',
  'Ορος',
  'Έκθεση',
  'Μαστίγιο',
  'Ποτήρι',
  'Κόλλα',
  'Σπουργίτι',
  'Όργανο',
  'Ημέρα',
  'Σαίξπηρ',
  'Μπουκάλι',
  'Κούκλα',
  'Σχέδιο',
  'Άγγελος',
  'Σκελετός',
  'Πλατεία',
  'Κεφάλαιο',
  'Κανόνι',
  'Πλατύποδας',
  'Ζυγός',
  'Ρομπότ',
  'Ταμπέλα',
  'Μούτρο',
  'Μόριο',
  'Πάσαλος',
  'Δεινόσαυρος',
  'Στέμμα',
  'Χείλος',
  'Ευρώπη',
  'Τουαλέτα',
  'Πέταλο',
  'Λεπτό',
  'Κύμα',
  'Ρόμπα',
  'Κεφάλι',
  'Κουζίνα',
  'Κυψέλη',
  'Στόμα',
  'Ξωτικό',
  'Κόκορας',
  'Σαγόνι',
  'Στοιχείο',
  'Φτερό',
  'Χρόνος',
  'Γούνα',
  'Τάπα',
  'Ρίζα',
  'Μήλο',
  'Φέσι',
  'Σοκολάτα',
  'Γαλλία',
  'Δείκτης',
  'Παπούτσι',
  'Μοντέλο',
  'Καρχαρίας',
  'Κρέμα',
  'Γάτα',
  'Πηρούνι',
  'Υπερήρωας',
  'Πνέυμα',
  'Μηχανή',
  'Τίτλος',
  'Στέκα',
  'Τρύπα',
  'Φόρεμα',
  'Καλόγερος',
  'Χιονάνθρωπος',
  'Φάκελος',
  'Ρώμη',
  'Βασίλισσα',
  'Παξιμάδι',
  'Πλυντήριο',
  'Μικροσκόπιο',
  'Οθόνη',
  'Καλάθι',
  'Κουδούνι',
  'Μπάνιο',
  'Λογαριαμός',
  'Γύρος',
  'Καγκουρώ',
  'Ουρανός',
  'Διάστημα',
  'Αυτοκίνητο',
  'Τροχός',
  'Κύπρος',
  'Φάση',
  'Συναυλία',
  'Λουκέτο',
  'Σκορπιός',
  'Πειρατής',
  'Άλπεις',
  'Τρομπέτα',
  'Βήμα',
  'Καρέκλα',
  'Ιμαλάϊα',
  'Πεταλούδα',
  'Κέρβερος',
  'Υπόθεση',
  'Μάγειρας',
  'Πυρσός',
  'Νίντζα',
  'Φιλμ',
  'Πρόληψη',
  'Καλάμι',
  'Καρφί',
  'Ταξή',
  'Κατσίκα',
  'Λοχ Νες',
  'Κοράκι',
  'Τηλεσκόπιο',
  'Μεσόγειος',
  'Πίνακας',
  'Βερολίνο',
  'Ζωή',
  'Πρόσκρουση',
  'Δόντι',
  'Έργο',
  'Μάζα',
  'Πέτρα',
  'Κάστρο',
  'Εκατομμυριούχος',
  'Αετός',
  'Γραφείο',
  'Αλεξίπτωτο',
  'Φόρμα',
  'Ανταρκτική',
  'Χρυσάφι',
  'Αράχνη',
  'Δορυφόρος',
  'Πιγκουίνος',
  'Γάντι',
  'Μονάδα',
  'Πετρέλαιο',
  'Νότα',
  'Πράκτορας',
  'Παλίρροια',
  'Γερμανία',
  'Όλυμπος',
  'Ρουλέτα',
  'Κλωστή',
  'Βελόνα',
  'Μάτι',
  'Χόλυγουντ',
  'Δηλητήριο',
  'Ρεύμα',
  'Βάση',
  'Πρόσωπο',
  'Πυραμίδα',
  'Κένταυρος',
  'Ζώνη',
  'Τύπος',
  'Δύτης',
  'Πίτα',
  'Κόρη',
  'Χορός',
  'Στρατιώτης',
  'Μονόκερως',
  'Γρύλος',
  'Καταρράκτης',
  'Δάκρυ',
  'Σκύλος',
  'Ασφάλεια',
  'Τόνος',
  'Ιαπωνία',
  'Πλοίο',
  'Άγκυρα',
  'Σημείο',
  'Νεκροθάφτης',
  'Σεισμός',
  'Κερί',
  'Κλέφτης',
  'Έβενος',
  'Σκνίπα',
  'Κουμπί',
  'Θάνατος',
  'Μάγισσα',
  'Κατηγορία',
  'Πλάνη',
  'Καζίνο',
  'Χιόνι',
  'Ψάρι',
  'Ιστορία',
  'Σωληνάριο',
  'Πύραυλος',
  'Λονδίνο',
  'Κλίμα',
  'Βαθμός',
  'Γίγαντας',
  'Σπόντα',
  'Στάδιο',
  'Φλογέρα',
  'Πρεσβεία',
  'Αγωγός',
  'Γόπα',
  'Λαθρέμπορος',
  'Παραλία',
  'Τραπεζίτης',
  'Φοίνικας',
  'Πάγος',
  'Χέρι',
  'Άτομο',
  'Δίσκος',
  'Βασιλιάς',
  'Αμερική',
  'Τέλος',
  'Φαινόμενο',
  'Βαμβάκι',
  'Τουφέκι',
  'Τζιν',
  'Ταινία',
  'Σπείρα',
  'Ξενοδοχείο',
  'Ακρωτήριο',
  'Σφαίρα',
  'Αστέρι',
  'Ασθένεια',
  'Αντίσταση',
  'Μέτωπο',
  'Φωτιά',
  'Νερό',
  'Δράκος',
  'Τιμή',
  'Νέα Υόρκη',
  'Κρεβάτι',
  'Μύτη',
  'Χρυσό',
  'Τραπέζι',
  'Ατλαντίδα',
  'Χάρη',
  'Λαγός',
  'Φάλαινα',
  'Κατάσκοπος',
  'Αρχή',
  'Προσβολή',
  'Φεγγάρι',
  'Χαρτί',
  'Τροία',
  'Αλυσίδα',
  'Γιατρός',
  'Πριγκίπισσα',
  'Δαχτυλίδι',
  'Ποντίκι',
  'Αυστραλία',
  'Έδαφος',
  'Γλώσσα',
  'Μάρτυρας',
  'Σκουλήκι',
  'Τοίχος',
  'Εκκλησία',
  'Παλάμη',
  'Τσίχλα',
  'Αγγλία',
  'Σύλληψη',
  'Σκοπός',
  'Τύχη',
  'Ιδιοφυΐα',
  'Πιάτο',
  'Πεζός',
  'Παγόβουνο',
  'Δικηγόρος',
  'Παραμάνα',
  'Γερανός',
  'Πλάκα',
  'Όπερα',
  'Καρότο',
  'Πρωινό',
  'Πόλος',
  'Επιστήμονας',
  'Σύνταξη',
  'Φράγμα',
  'Υπηρεσία',
  'Ιππότης',
  'Αστυνομία',
  'Διαβήτης',
  'Εταιρία',
  'Κέτσαπ',
  'Άδεια',
  'Παπαγάλος',
  'Κρήτη',
  'Γήπεδο',
  'Παράσταση',
  'Καρπός',
  'Άλογο',
  'Νύχτα',
  'Περιθώριο',
  'Κέντρο',
  'Λόγος',
  'Λιμουζίνα',
  'Πόλεμος',
  'Μοίρα',
  'Πράσινο',
  'Κάλτσα',
  'Βραχιόλι',
  'Ουσία',
  'Πλάσμα',
  'Πύργος',
  'Κέρατο',
  'Ντάμα',
  'Φέτα',
  'Μέλι',
  'Τόκυο',
  'Βόδι',
  'Βούλα',
  'Φάντασμα',
  'Σφήκα',
  'Μίζα',
  'Γέφυρα',
  'Καλώδιο',
  'Νοσοκόμα',
  'Πένα',
  'Ανέκδοτο',
  'Ταυτότητα',
  'Καρδιά',
  'Γλόμπος',
  'Μολύβι',
  'Φορτηγό',
  'Αίγυπτος',
  'Διέυθυνση',
  'Γράμμα',
  'Μαχαίρι',
  'Άνεμος',
  'Σκηνή',
  'Ρόδα',
  'Γραβάτα',
  'Λιοντάρι',
  'Τζάκι',
  'Βόμβα',
  'Πάπια',
  'Αγρική',
  'Κλειδί',
  'Φρύδι',
  'Παγωτό',
  'Λάστιχο',
  'Περιβάλλον',
  'Αέρας',
  'Θέατρο',
  'Αλεπού',
  'Σημάδι'
];

const Dropdown = ({ onSelect }) => {
  const options = ['red', 'blue'];

  return (
    <div className="dropdown">
      {options.map((option, index) => (
        <div
          className={`flex items-center rounded-xl px-1 mt-0.5`}
          key={index}
          onClick={() => onSelect(option)}
        >
          <span className="m-auto text-xl cursor-pointer">
            {option}
          </span>
        </div>
      ))}
    </div>
  );
};

Dropdown.propTypes = {
  onSelect: PropTypes.func.isRequired,
};

const shuffleArray = (array) => {
  const shuffledArray = [...array];
  for (let i = shuffledArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffledArray[i], shuffledArray[j]] = [shuffledArray[j], shuffledArray[i]];
  }
  return shuffledArray;
};

const App = () => {
  const [shuffledWords, setShuffledWords] = useState([]);
  const [selectedTeams, setSelectedTeams] = useState(Array(wordsData.length).fill(null));
  const [showDropdown, setShowDropdown] = useState(false);
  const [selectedWordIndex, setSelectedWordIndex] = useState(null);

  const generateGrid = () => {
    const shuffledArray = shuffleArray(wordsData);
    setShuffledWords(shuffledArray);
    setSelectedTeams(Array(shuffledArray.length).fill(null));
    setSelectedWordIndex(null);
  };

  const handleDropdownSelect = (option) => {
    setShowDropdown(false);
    if (selectedWordIndex !== null) {
      const updatedTeams = [...selectedTeams];
      updatedTeams[selectedWordIndex] = option.toLowerCase();
      setSelectedTeams(updatedTeams);
    }
  };

  const toggleDropdown = (index) => {
    setShowDropdown(!showDropdown);
    setSelectedWordIndex(index);
  };

  return (
    <div className="h-[100vh]">
      <Snowfall numSnowflakes={50} />
      <div className="flex items-center pt-5 px-7">
        <h1 className="text-xl grow">Codenames Game</h1>
        <button className="button-49" onClick={generateGrid}>NEW GAME</button>
      </div>
      <div className="p-6 grid grid-cols-5 gap-10">
        {shuffledWords.map((word, index) => (
          <div
            className={`flex rounded-lg border border-teal-300 p-5 hover:bg-secondary relative ${selectedTeams[index] === 'red' ? 'bg-red-600' : selectedTeams[index] === 'blue' ? 'bg-blue-800' : 'bg-third'}`}
            key={index}
            onClick={() => toggleDropdown(index)}
          >
            <span className="p-4 text-2xl m-auto">{word}</span>
            {showDropdown && selectedWordIndex === index && (
              <Dropdown onSelect={(option) => handleDropdownSelect(option)} />
            )}
          </div>
        ))}
      </div>
    </div>
  );
};

export default App;
